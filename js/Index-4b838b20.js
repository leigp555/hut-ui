import{D as e,C as t}from"./DemoDisplay-5c75c5c6.js";import{d as n,v as l,r as a,o as s,c as o,e as i,m as u,q as r,f as p,g as c,x as m,F as v,h as d,t as f,y as _,T as g,G as b,i as x,j as h,L as y}from"./index-d036eac4.js";import{_ as M,P as T,T as w}from"./Paragraph-90b9bde5.js";import{_ as S}from"./ApiIntro.vue_vue_type_style_index_0_lang-cb80a9b7.js";import{g as k,a as I}from"./helper-0b2cce03.js";const j={class:"ui-mentions-wrap"},C=["value"],O={class:"ui-mentions-pop"},D=["title"],z=n({__name:"Mentions",props:{value:{default:""},options:{default:()=>[]}},emits:["select","update:value"],setup(e,{emit:t}){const n=e,{value:x,options:h}=l(n),y=a(null),M=a(null),T=a(0),w=a(!1),S=document.createElement("span");S.classList.add("mentions-pop-left");const k=e=>{const n=e.target;if(t("update:value",n.value),n&&"@"===n.value.substring(n.selectionStart-1,n.selectionStart)){S.innerText=n.value.substring(0,n.selectionStart);let e=S.getBoundingClientRect().width;for(;e+7.1>n.clientWidth-19;)e=e-n.clientWidth+28;T.value=e+11,w.value=!0}else w.value=!1};s((()=>{var e;null==(e=M.value)||e.appendChild(S)}));const I=e=>{const n=e.target,l=n.getAttribute("data-value");if("p"===n.tagName.toLowerCase()&&"list"===l){const e=y.value;let l=0;e&&(l=e.selectionStart);const a=x.value.substring(0,l)+n.innerText+x.value.substring(l);t("update:value",a),t("select",n.innerText),w.value=!1,setTimeout((()=>{e.focus(),e.setSelectionRange(l+n.innerText.length,l+n.innerText.length)}))}},z=()=>{w.value=!1};return(e,t)=>(o(),i("div",j,[u("textarea",{ref_key:"inputRef",ref:y,class:"ui-mentions-input ui-scroll-container",value:r(x),onInput:k,onBlur:z},null,40,C),u("div",{class:"ui-mentions-getWidth",ref_key:"getWidthRef",ref:M},null,512),u("div",{class:"ui-mentions-pop-wrap",onMousedown:I,style:b({left:`${T.value}px`})},[p(g,{name:"mentions"},{default:c((()=>[m(u("div",O,[(o(!0),i(v,null,d(r(h),(e=>(o(),i("p",{key:e,class:"mentions-list-item","data-value":"list",title:e.value},f(e.label),9,D)))),128))],512),[[_,w.value]])])),_:1})],36)]))}}),J=u("p",null,"提及组件。",-1),R=u("ul",null,[u("li",null,"Mentions")],-1),W=u("p",null,"用于在输入中提及某人或某事，常用于发布、聊天或评论功能。",-1),A=n({__name:"Intro",setup:e=>(e,t)=>(o(),x(r(w),null,{default:c((()=>[p(r(M),{level:4},{default:c((()=>[h("简介")])),_:1}),p(r(T),null,{default:c((()=>[J])),_:1}),p(r(M),{level:4},{default:c((()=>[h("组件概述")])),_:1}),p(r(T),null,{default:c((()=>[R])),_:1}),p(r(M),{level:4},{default:c((()=>[h("使用场景")])),_:1}),p(r(T),null,{default:c((()=>[W])),_:1})])),_:1}))}),L=n({__name:"Api",setup(e){const t=[{rowIndex:1,"事件名称":"select","说明":"选择选项时触发","回调参数":"(selectOption:string) => void"}],n=[{componentName:"Mentions",attrContent:[{rowIndex:1,"属性":"value","说明":"value(v-model)","类型":"string","默认值":""},{rowIndex:2,"属性":"options","说明":"提示信息","类型":" MentionsOptions[]","默认值":"[]"}]}];return(e,l)=>(o(),x(S,{"attr-content-arr":n,"event-content":t}))}}),B=n({__name:"DemoOne",setup(e){const t=a(""),n=[{label:"afc163",value:"afc163"},{label:"zombieJ",value:"zombieJ"},{label:"yesmeck",value:"yesmeck"}],l=e=>{console.log("select",e)};return(e,a)=>(o(),x(r(z),{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:n,onSelect:l},null,8,["value"]))}}),N=e=>{e.__sourceCode="<template>\n  <Mentions v-model:value=\"value\" :options=\"options\" @select=\"onSelect\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { Mentions, MentionsOptions } from 'hut-ui'\n\nconst value = ref<string>('')\nconst options: MentionsOptions[] = [\n  {\n    label: 'afc163',\n    value: 'afc163'\n  },\n  {\n    label: 'zombieJ',\n    value: 'zombieJ'\n  },\n  {\n    label: 'yesmeck',\n    value: 'yesmeck'\n  }\n]\n\nconst onSelect = (option: MentionsOptions) => {\n  console.log('select', option)\n}\n<\/script>",e.__sourceTitle="基本用法"};N(B);const P=n({__name:"Demo",setup(t){const n=y((()=>[B].map(((e,t)=>k(e,"mentions",t)))));return(t,l)=>(o(),x(e,{"demo-arr":r(n)},null,8,["demo-arr"]))}}),q=n({__name:"Index",setup(e){a(null);const n=["基本用法"],l=y((()=>I("mentions",n)));return(e,n)=>(o(),x(t,{"nav-arr":r(l),title:"Mentions 提及","component-name":"mentions"},{intro:c((()=>[p(A)])),demo:c((()=>[p(P)])),api:c((()=>[p(L)])),_:1},8,["nav-arr"]))}});export{q as default};
