import{d as e,x as l,r as a,o as t,S as n,w as u,c as o,e as s,m as v,C as i,A as r}from"./index-5a408e05.js";const f=e({__name:"Affix",props:{offsetTop:{default:50},scrollContainer:{type:Function,default:()=>window}},emits:["change"],setup(e,{emit:f}){const c=e,{scrollContainer:p,offsetTop:d}=l(c),m=a(null),g=a(null),x=a(0),w=a(!1),T=a();const h=function(e,l){let a=(new Date).getTime();return()=>{const t=(new Date).getTime();t-a>=l&&(e(),a=t)}}((()=>{if(T.value){const e=m.value.offsetTop-T.value.offsetTop;T.value.scrollTop>e-d.value?w.value=!0:T.value.scrollTop<e-d.value&&(w.value=!1)}}),10);return t((()=>{var e;p.value()===window?T.value=document.documentElement:T.value=p.value(),null==(e=T.value)||e.addEventListener("scroll",h),x.value=g.value.getBoundingClientRect().height,m.value.style.height=`${x.value}px`})),n((()=>{var e;null==(e=T.value)||e.removeEventListener("scroll",h)})),u(w,(()=>{f("change",w.value),w.value&&T.value&&(g.value.style.top=`${d.value+T.value.getBoundingClientRect().top}px`)})),(e,l)=>(o(),s("div",{class:"ui-affix-wrap",ref_key:"containerRef",ref:m},[v("div",{ref_key:"innerRef",ref:g,class:r(["ui-affix-inner",{fixed:w.value}])},[i(e.$slots,"default")],2)],512))}});export{f as _};
