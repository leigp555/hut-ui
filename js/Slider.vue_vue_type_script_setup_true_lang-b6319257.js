import{d as e,v as a,r as l,o as u,c as t,e as n,m as s,t as v,q as r,z as o}from"./index-be6a3e2f.js";const d={class:"ui-slider-view"},i={class:"ui-slider-tip"},c=e({__name:"Slider",props:{value:{default:0},disabled:{type:Boolean,default:!1}},emits:["update:value","change","afterChange"],setup(e,{emit:c}){const m=e,{value:p,disabled:f}=a(m),h=l(null),g=l(null),E=l(null),L=l(!1),y=l(0),x=l(0),b=l(0),k=l(0),$=l(0);function _(){if(!E.value)return;const e=x.value+$.value-k.value;e<=y.value&&e>=0?(E.value.style.transform=`translate3d(${$.value}px,-50%,0)`,g.value.style.transform=`translate3d(${$.value}px,0,0)`,c("update:value",Math.ceil(e/y.value*100)),c("change",Math.ceil(e/y.value*100))):e>y.value?(E.value.style.transform=`translate3d(${y.value}px,-50%,0)`,g.value.style.transform=`translate3d(${y.value}px,0,0)`,c("update:value",100),c("change",100),$.value=y.value):e<0&&(E.value.style.transform="translate3d(0px,-50%,0)",g.value.style.transform="translate3d(0px,0,0)",c("update:value",0),c("change",0),$.value=0)}function w(e){e.stopPropagation(),e.preventDefault(),L.value&&E.value&&g.value&&($.value=k.value+e.clientX-b.value,_())}function C(){k.value=$.value,L.value=!1,document.documentElement.removeEventListener("mousemove",w),document.documentElement.removeEventListener("mouseup",C),E.value.classList.remove("ui-slider-drag"),c("afterChange",p.value)}u((()=>{h.value&&E.value&&g.value&&(y.value=h.value.getBoundingClientRect().width-16,x.value=p.value/100*y.value,k.value=x.value,E.value.style.transform=`translate3d(${x.value}px,-50%,0)`,g.value.style.transform=`translate3d(${x.value}px,0,0)`)}));const M=e=>{if(f.value)return e.stopPropagation(),void e.preventDefault();L.value=!0,b.value=e.clientX,x.value=p.value/100*y.value,document.documentElement.addEventListener("mousemove",w),document.documentElement.addEventListener("mouseup",C),E.value.classList.add("ui-slider-drag")};function P(e){e.stopPropagation(),L.value&&E.value&&g.value&&($.value=k.value+e.touches[0].clientX-b.value,_())}function R(){k.value=$.value,L.value=!1,document.documentElement.removeEventListener("touchmove",P),document.documentElement.removeEventListener("touchend",R),E.value.classList.remove("ui-slider-drag"),c("afterChange",p.value)}const X=e=>{if(f.value)return e.stopPropagation(),void e.preventDefault();L.value=!0,b.value=e.touches[0].clientX,x.value=p.value/100*y.value,document.documentElement.addEventListener("touchmove",P),document.documentElement.addEventListener("touchend",R),E.value.classList.add("ui-slider-drag")};return(e,a)=>(t(),n("div",{class:o(["ui-slider-wrap",{"ui-slider-disabled":r(f)}]),ref_key:"sliderWrapRef",ref:h},[s("div",d,[s("div",{class:"ui-slider-line",ref_key:"sliderLineRef",ref:g},null,512)]),s("div",{class:o(["ui-slider-block",{"ui-slider-block-disabled":r(f)}]),ref_key:"sliderBlockRef",ref:E,onMousedown:M,onMouseup:C,onTouchstart:X,onTouchend:R},[s("span",i,v(r(p)),1)],34)],2))}});export{c as _};
