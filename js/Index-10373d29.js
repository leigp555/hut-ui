import{D as e,C as n}from"./DemoDisplay-5c75c5c6.js";import{d as a,c as t,i as l,g as o,f as r,q as s,j as u,m as i,r as p,o as d,e as c,J as m,t as g,F as f,h as v,I as y,n as x,L as b}from"./index-d036eac4.js";import{_ as w,P as _,T as h}from"./Paragraph-90b9bde5.js";import{_ as I,c as C}from"./ApiIntro.vue_vue_type_style_index_0_lang-cb80a9b7.js";import{r as k,g as T,a as S}from"./helper-0b2cce03.js";import{_ as j}from"./Pagination.vue_vue_type_script_setup_true_lang-4da5ff8b.js";import{_ as z}from"./Popconfirm.vue_vue_type_script_setup_true_lang-93e340ad.js";import{_ as D}from"./Tag.vue_vue_type_script_setup_true_lang-346dfe63.js";import{a as N}from"./ajax-ad257d80.js";const P=i("p",null,"展示行列数据。",-1),O=i("ul",null,[i("li",null,"Table: 主要组件")],-1),V=i("ul",null,[i("li",null,"当有大量结构化的数据需要展现时；"),i("li",null,"当需要对数据进行排序、搜索、分页、自定义操作等复杂行为时。")],-1),A=a({__name:"Intro",setup:e=>(e,n)=>(t(),l(s(h),null,{default:o((()=>[r(s(w),null,{default:o((()=>[u("简介")])),_:1}),r(s(_),null,{default:o((()=>[P])),_:1}),r(s(w),null,{default:o((()=>[u("组件概览")])),_:1}),r(s(_),null,{default:o((()=>[O])),_:1}),r(s(w),null,{default:o((()=>[u("使用场景")])),_:1}),r(s(_),null,{default:o((()=>[V])),_:1})])),_:1}))}),H=a({__name:"Api",setup(e){const n=[],a=[{componentName:"Text",attrContent:[{rowIndex:1,"属性":"headSource","说明":"头部数据","类型":"TableDataType[]","默认值":"[]"},{rowIndex:2,"属性":"bodySource","说明":"代码标记","类型":"表身数据数组","默认值":"[]"},{rowIndex:3,"属性":"loading","说明":"是否为加载中状态","类型":"boolean","默认值":"false"},{rowIndex:4,"属性":"styleMode","说明":"表格样式","类型":"'auto' | 'fixed'","默认值":"auto"},{rowIndex:5,"属性":"bordered","说明":"是否有边框","类型":"boolean","默认值":"true"},{rowIndex:6,"属性":"customClass","说明":"自定义class","类型":"string","默认值":"custom-class-table"}]}];return(e,o)=>(t(),l(I,{"attr-content-arr":a,"event-content":n}))}}),B={key:0,style:{color:"red"}},J={key:1},U={key:0,class:"tags"},F={key:1,class:"actions"},M={key:2,style:{color:"#1890ff"}},q={style:{display:"flex","justify-content":"center","margin-top":"50px"}},Q=a({__name:"DemoOne",setup(e){const n=p(1),a=p(5),x=p(["5","10","20","30","40"]),b=p(0),w=p(!1),_=e=>5===e?{colspan:0}:{colspan:1},h=p([{rowIndex:0,label:"Name",key:"name",customCell:e=>({colspan:5===e?6:1})},{rowIndex:0,label:"Age",key:"age",customCell:_},{rowIndex:0,label:"Home phone",colspan:2,key:"tel",customCell:e=>2===e?{rowspan:2}:3===e?{rowspan:0}:5===e?{colspan:0}:{colspan:1}},{rowIndex:0,label:"Phone",colspan:0,key:"phone",customCell:_},{rowIndex:0,label:"Address",key:"address",customCell:_},{rowIndex:0,label:"tags",key:"tags",customCell:_},{rowIndex:0,label:"Actions",key:"actions",customCell:()=>({colspan:1})}]),I=p([]),T={get(e){"/table"===e&&(w.value=!0,N(e,0,n.value,a.value).then((e=>{I.value=[...e.data],b.value=e.totalDateNum,w.value=!1})).catch((e=>{console.log(e),w.value=!1})))},delete(e,t){"/table"===e&&(w.value=!0,N(e,0,n.value,a.value,t,"delete").then((e=>{I.value=[...e.data],b.value=e.totalDateNum,w.value=!1})).catch((e=>{console.log(e),w.value=!1})))}};d((()=>{T.get("/table")}));const S=e=>{n.value=e,T.get("/table")};return(e,p)=>(t(),l(s(C),{headSource:h.value,bodySource:I.value,loading:w.value,"style-mode":"auto",bordered:""},{head:o((()=>[u("Header")])),footer:o((()=>[u("Footer")])),tableHead:o((e=>["name"===e.keyValue?(t(),c("span",B,[r(s(m),{name:"weixin",width:"1em ",height:"1em",style:{"margin-right":"4px"}}),u(" "+g(e.dataValue),1)])):(t(),c("span",J,g(e.dataValue),1))])),tableBody:o((e=>["tags"===e.keyValue?(t(),c("div",U,[(t(!0),c(f,null,v(e.dataValue,(e=>(t(),l(s(D),{color:s(k)(),key:e},{default:o((()=>[u(g(e.toUpperCase()),1)])),_:2},1032,["color"])))),128))])):"actions"===e.keyValue?(t(),c("div",F,[i("div",null,[r(s(z),{placement:"topCenter",okText:"Yes",cancelText:"No",onConfirm:n=>(e=>{2===e.rowIndex?h.value[2].customCell=e=>3===e?{colspan:1,rowspan:1}:5===e?{colspan:0}:{colspan:1}:3===e.rowIndex&&(h.value[2].customCell=e=>2===e?{rowspan:1}:5===e?{colspan:0}:{colspan:1}),T.delete("/table",JSON.stringify(e))})(e.data)},{title:o((()=>[i("p",null,g("Sure to delete?"))])),default:o((()=>[r(s(y),{type:"link",style:{padding:"4px 8px"}},{default:o((()=>[u("delete")])),_:1})])),_:2},1032,["onConfirm"])])])):(t(),c("span",M,g(e.dataValue),1))])),pagination:o((()=>[i("div",q,[r(s(j),{current:n.value,"onUpdate:current":p[0]||(p[0]=e=>n.value=e),total:b.value,pageSize:a.value,"onUpdate:pageSize":p[1]||(p[1]=e=>a.value=e),onPageSizeChange:p[2]||(p[2]=e=>a.value=e),disabled:w.value,pageSizeOptions:x.value,showQuickJumper:"",showSizeChanger:"",showTotal:"",onChange:S},{buildOptionText:o((e=>[i("span",null,g(e.value)+"条/页",1)])),_:1},8,["current","total","pageSize","disabled","pageSizeOptions"])])])),_:1},8,["headSource","bodySource","loading"]))}}),Y=e=>{e.__sourceCode='<template>\n  <Table\n    :headSource="columns"\n    :bodySource="data"\n    :loading="loading"\n    style-mode="auto"\n    bordered\n  >\n    <template #head>Header</template>\n    <template #footer>Footer</template>\n    <template #tableHead="item">\n      <span v-if="item.keyValue === \'name\'" style="color: red">\n        <Icon_wechat\n          name="weixin"\n          width="1em "\n          height="1em"\n          style="margin-right: 4px"\n        />\n        {{ item.dataValue }}\n      </span>\n      <span v-else>{{ item.dataValue }}</span>\n    </template>\n    <template #tableBody="item">\n      <div v-if="item.keyValue === \'tags\'" class="tags">\n        <Tag :color="randomColor()" v-for="i in item.dataValue" :key="i">\n          {{ i.toUpperCase() }}\n        </Tag>\n      </div>\n      <div v-else-if="item.keyValue === \'actions\'" class="actions">\n        <div>\n          <Popconfirm\n            placement="topCenter"\n            okText="Yes"\n            cancelText="No"\n            @confirm="confirm(item.data)"\n          >\n            <template #title>\n              <p>{{ text }}</p>\n            </template>\n            <Button type="link" style="padding: 4px 8px">delete</Button>\n          </Popconfirm>\n        </div>\n      </div>\n      <span v-else style="color: #1890ff">{{ item.dataValue }}</span>\n    </template>\n    <template #pagination>\n      <div style="display: flex; justify-content: center; margin-top: 50px">\n        <Pagination\n          v-model:current="current"\n          :total="dataNum"\n          v-model:pageSize="pageSize"\n          @pageSizeChange="pageSize = $event"\n          :disabled="loading"\n          :pageSizeOptions="pageSizeOptions"\n          showQuickJumper\n          showSizeChanger\n          showTotal\n          @change="pageChange"\n        >\n          <template #buildOptionText="props">\n            <span>{{ props.value }}条/页</span>\n          </template>\n        </Pagination>\n      </div>\n    </template>\n  </Table>\n</template>\n\n<script setup lang="ts">\nimport { onMounted, ref } from \'vue\'\nimport { Icon_wechat } from \'@hut-ui/icons-vue\'\nimport { Table, Pagination, Popconfirm, Tag, Button, TableDataType } from \'hut-ui\'\nimport { ajax } from \'@/eg/ajax\'\nimport { randomColor } from \'@/eg/helper\'\n\nconst current = ref<number>(1)\nconst pageSize = ref<number>(5)\nconst pageSizeOptions = ref<string[]>([\'5\', \'10\', \'20\', \'30\', \'40\'])\nconst dataNum = ref<number>(0)\nconst loading = ref<boolean>(false)\n\nconst sharedOnCell = (rowIndex: number): { colspan: number } => {\n  if (rowIndex === 5) {\n    return { colspan: 0 }\n  }\n  return { colspan: 1 }\n}\nconst columns = ref<TableDataType[]>([\n  {\n    rowIndex: 0,\n    label: \'Name\',\n    key: \'name\',\n    customCell: (rowIndex) => ({\n      colspan: rowIndex === 5 ? 6 : 1\n    })\n  },\n  {\n    rowIndex: 0,\n    label: \'Age\',\n    key: \'age\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Home phone\',\n    colspan: 2,\n    key: \'tel\',\n    // eslint-disable-next-line consistent-return\n    customCell: (rowIndex) => {\n      if (rowIndex === 2) {\n        return { rowspan: 2 }\n      }\n      if (rowIndex === 3) {\n        return { rowspan: 0 }\n      }\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  },\n  {\n    rowIndex: 0,\n    label: \'Phone\',\n    colspan: 0,\n    key: \'phone\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Address\',\n    key: \'address\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'tags\',\n    key: \'tags\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Actions\',\n    key: \'actions\',\n    customCell: () => ({ colspan: 1 })\n  }\n])\n\nconst data = ref<TableDataType[]>([])\n\nconst fetch = {\n  get(url: string) {\n    if (url === \'/table\') {\n      loading.value = true\n      ;(\n        ajax(url, 0, current.value, pageSize.value) as Promise<{\n          data: TableDataType[]\n          totalDateNum: number\n        }>\n      )\n        .then((res) => {\n          data.value = [...res.data]\n          dataNum.value = res.totalDateNum\n          loading.value = false\n        })\n        .catch((err) => {\n          console.log(err)\n          loading.value = false\n        })\n    }\n  },\n  delete(url: string, payload: string) {\n    if (url === \'/table\') {\n      loading.value = true\n      ;(\n        ajax(url, 0, current.value, pageSize.value, payload, \'delete\') as Promise<{\n          data: TableDataType[]\n          totalDateNum: number\n        }>\n      )\n        .then((res) => {\n          data.value = [...res.data]\n          dataNum.value = res.totalDateNum\n          loading.value = false\n        })\n        .catch((err) => {\n          console.log(err)\n          loading.value = false\n        })\n    }\n  }\n}\nonMounted(() => {\n  fetch.get(\'/table\')\n})\nconst pageChange = (newPage: number) => {\n  current.value = newPage\n  fetch.get(\'/table\')\n}\n\nconst text = \'Sure to delete?\'\n\nconst confirm = (item: TableDataType) => {\n  // 删除操作前应把原先的表格合并操作先复原，不然后续的表格格式会错乱\n  if (item.rowIndex === 2) {\n    columns.value[2].customCell = (rowIndex) => {\n      if (rowIndex === 3) {\n        return { colspan: 1, rowspan: 1 }\n      }\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  } else if (item.rowIndex === 3) {\n    columns.value[2].customCell = (rowIndex) => {\n      if (rowIndex === 2) {\n        return { rowspan: 1 }\n      }\n\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  }\n  // 发送删除请求\n  fetch.delete(\'/table\', JSON.stringify(item))\n}\n<\/script>\n\n<style scoped lang="scss">\n.actions,\n.tags {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n</style>',e.__sourceTitle="基本用法"};Y(Q);const L=x(Q,[["__scopeId","data-v-0a2bcfc3"]]),$=a({__name:"Demo",setup(n){const a=b((()=>[L].map(((e,n)=>T(e,"table",n)))));return(n,o)=>(t(),l(e,{"demo-arr":s(a)},null,8,["demo-arr"]))}}),E=a({__name:"Index",setup(e){p(null);const a=["基本用法"],u=b((()=>S("table",a)));return(e,a)=>(t(),l(n,{"nav-arr":s(u),title:"Table 表格","component-name":"table"},{intro:o((()=>[r(A)])),demo:o((()=>[r($)])),api:o((()=>[r(H)])),_:1},8,["nav-arr"]))}});export{E as default};
