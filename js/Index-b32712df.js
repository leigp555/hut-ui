import{_ as e,P as n,T as t,g as l,D as a,C as s,a as o}from"./DemoDisplay-55668b6d.js";import"./Upload.vue_vue_type_style_index_0_lang-31d412f5.js";import{d as i,k as u,r,D as c,o as p,c as m,b as v,l as d,e as f,w as _,A as g,F as b,f as x,t as y,B as M,T as h,y as w,g as T,h as k,z as S}from"./index-5d11ddfa.js";import{_ as I}from"./ApiIntro-cc0cc467.js";const C={class:"ui-mentions-wrap"},D=["value"],O={class:"ui-mentions-pop"},z=["title"],j=i({__name:"Mentions",props:{value:{default:""},options:{default:()=>[]}},emits:["select","update:value"],setup(e,{emit:n}){const t=e,{value:l,options:a}=u(t),s=r(null),o=r(null),i=r(0),T=r(!1),k=document.createElement("span");k.classList.add("mentions-pop-left");const S=e=>{const t=e.target;if(n("update:value",t.value),t&&"@"===t.value.substring(t.selectionStart-1,t.selectionStart)){k.innerText=t.value.substring(0,t.selectionStart);let e=k.getBoundingClientRect().width;for(;e+7.1>t.clientWidth-19;)e=e-t.clientWidth+28;i.value=e+11,T.value=!0}else T.value=!1};c((()=>{var e;null==(e=o.value)||e.appendChild(k)}));const I=e=>{const t=e.target,a=t.getAttribute("data-value");if("p"===t.tagName.toLowerCase()&&"list"===a){const e=s.value;let a=0;e&&(a=e.selectionStart);const o=l.value.substring(0,a)+t.innerText+l.value.substring(a);n("update:value",o),n("select",t.innerText),T.value=!1,setTimeout((()=>{e.focus(),e.setSelectionRange(a+t.innerText.length,a+t.innerText.length)}))}},j=()=>{T.value=!1};return(e,n)=>(p(),m("div",C,[v("textarea",{ref_key:"inputRef",ref:s,class:"ui-mentions-input ui-scroll-container",value:d(l),onInput:S,onBlur:j},null,40,D),v("div",{class:"ui-mentions-getWidth",ref_key:"getWidthRef",ref:o},null,512),v("div",{class:"ui-mentions-pop-wrap",onMousedown:I,style:w({left:`${i.value}px`})},[f(h,{name:"mentions"},{default:_((()=>[g(v("div",O,[(p(!0),m(b,null,x(d(a),(e=>(p(),m("p",{key:e,class:"mentions-list-item","data-value":"list",title:e.value},y(e.label),9,z)))),128))],512),[[M,T.value]])])),_:1})],36)]))}}),A=v("p",null,"提及组件。",-1),J=v("ul",null,[v("li",null,"Mentions")],-1),R=v("p",null,"用于在输入中提及某人或某事，常用于发布、聊天或评论功能。",-1),W=i({__name:"Intro",setup:l=>(l,a)=>(p(),T(d(t),null,{default:_((()=>[f(d(e),{level:4},{default:_((()=>[k("简介")])),_:1}),f(d(n),null,{default:_((()=>[A])),_:1}),f(d(e),{level:4},{default:_((()=>[k("组件概述")])),_:1}),f(d(n),null,{default:_((()=>[J])),_:1}),f(d(e),{level:4},{default:_((()=>[k("使用场景")])),_:1}),f(d(n),null,{default:_((()=>[R])),_:1})])),_:1}))}),B=i({__name:"Api",setup(e){const n=[{rowIndex:1,"事件名称":"select","说明":"选择选项时触发","回调参数":"(selectOption:string) => void"}],t=[{componentName:"Mentions",attrContent:[{rowIndex:1,"属性":"value","说明":"value(v-model)","类型":"string","默认值":""},{rowIndex:2,"属性":"options","说明":"提示信息","类型":" MentionsOptions[]","默认值":"[]"}]}];return(e,l)=>(p(),T(I,{"attr-content-arr":t,"event-content":n}))}});var L=e=>{e.__sourceCode="<template>\n  <Mentions v-model:value=\"value\" :options=\"options\" @select=\"onSelect\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { Mentions, MentionsOptions } from '@/lib'\n\nconst value = ref<string>('')\nconst options: MentionsOptions[] = [\n  {\n    label: 'afc163',\n    value: 'afc163'\n  },\n  {\n    label: 'zombieJ',\n    value: 'zombieJ'\n  },\n  {\n    label: 'yesmeck',\n    value: 'yesmeck'\n  }\n]\n\nconst onSelect = (option: MentionsOptions) => {\n  console.log('select', option)\n}\n<\/script>",e.__sourceTitle="基本用法"};const N=i({__name:"DemoOne",setup(e){const n=r(""),t=[{label:"afc163",value:"afc163"},{label:"zombieJ",value:"zombieJ"},{label:"yesmeck",value:"yesmeck"}],l=e=>{console.log("select",e)};return(e,a)=>(p(),T(d(j),{value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e),options:t,onSelect:l},null,8,["value"]))}});L(N);const U=i({__name:"Demo",setup(e){const n=S((()=>[N].map(((e,n)=>l(e,"mentions",n)))));return(e,t)=>(p(),T(a,{"demo-arr":d(n)},null,8,["demo-arr"]))}}),E=i({__name:"Index",setup(e){r(null);const n=["基本用法"],t=S((()=>o("mentions",n)));return(e,n)=>(p(),T(s,{"nav-arr":d(t),title:"Mentions 提及","component-name":"mentions"},{intro:_((()=>[f(W)])),demo:_((()=>[f(U)])),api:_((()=>[f(B)])),_:1},8,["nav-arr"]))}});export{E as default};
