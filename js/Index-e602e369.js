import{D as e,C as n}from"./DemoDisplay-53a9c10a.js";import{d as t,v as l,r as a,o as s,c as o,e as i,n as u,q as r,f as c,g as p,x as m,F as v,i as d,t as f,y as _,T as g,G as b,j as x,k as M,J as h}from"./index-6bb449f3.js";import{_ as y,P as T,T as k}from"./Paragraph-138135f0.js";import{_ as w}from"./ApiIntro-fdf4ccdf.js";import{g as S,a as I}from"./helper-7416cab9.js";const j={class:"ui-mentions-wrap"},C=["value"],O={class:"ui-mentions-pop"},D=["title"],J=t({__name:"Mentions",props:{value:{default:""},options:{default:()=>[]}},emits:["select","update:value"],setup(e,{emit:n}){const t=e,{value:x,options:M}=l(t),h=a(null),y=a(null),T=a(0),k=a(!1),w=document.createElement("span");w.classList.add("mentions-pop-left");const S=e=>{const t=e.target;if(n("update:value",t.value),t&&"@"===t.value.substring(t.selectionStart-1,t.selectionStart)){w.innerText=t.value.substring(0,t.selectionStart);let e=w.getBoundingClientRect().width;for(;e+7.1>t.clientWidth-19;)e=e-t.clientWidth+28;T.value=e+11,k.value=!0}else k.value=!1};s((()=>{var e;null==(e=y.value)||e.appendChild(w)}));const I=e=>{const t=e.target,l=t.getAttribute("data-value");if("p"===t.tagName.toLowerCase()&&"list"===l){const e=h.value;let l=0;e&&(l=e.selectionStart);const a=x.value.substring(0,l)+t.innerText+x.value.substring(l);n("update:value",a),n("select",t.innerText),k.value=!1,setTimeout((()=>{e.focus(),e.setSelectionRange(l+t.innerText.length,l+t.innerText.length)}))}},J=()=>{k.value=!1};return(e,n)=>(o(),i("div",j,[u("textarea",{ref_key:"inputRef",ref:h,class:"ui-mentions-input ui-scroll-container",value:r(x),onInput:S,onBlur:J},null,40,C),u("div",{class:"ui-mentions-getWidth",ref_key:"getWidthRef",ref:y},null,512),u("div",{class:"ui-mentions-pop-wrap",onMousedown:I,style:b({left:`${T.value}px`})},[c(g,{name:"mentions"},{default:p((()=>[m(u("div",O,[(o(!0),i(v,null,d(r(M),(e=>(o(),i("p",{key:e,class:"mentions-list-item","data-value":"list",title:e.value},f(e.label),9,D)))),128))],512),[[_,k.value]])])),_:1})],36)]))}}),z=u("p",null,"提及组件。",-1),R=u("ul",null,[u("li",null,"Mentions")],-1),W=u("p",null,"用于在输入中提及某人或某事，常用于发布、聊天或评论功能。",-1),A=t({__name:"Intro",setup:e=>(e,n)=>(o(),x(r(k),null,{default:p((()=>[c(r(y),{level:4},{default:p((()=>[M("简介")])),_:1}),c(r(T),null,{default:p((()=>[z])),_:1}),c(r(y),{level:4},{default:p((()=>[M("组件概述")])),_:1}),c(r(T),null,{default:p((()=>[R])),_:1}),c(r(y),{level:4},{default:p((()=>[M("使用场景")])),_:1}),c(r(T),null,{default:p((()=>[W])),_:1})])),_:1}))}),B=t({__name:"Api",setup(e){const n=[{rowIndex:1,"事件名称":"select","说明":"选择选项时触发","回调参数":"(selectOption:string) => void"}],t=[{componentName:"Mentions",attrContent:[{rowIndex:1,"属性":"value","说明":"value(v-model)","类型":"string","默认值":""},{rowIndex:2,"属性":"options","说明":"提示信息","类型":" MentionsOptions[]","默认值":"[]"}]}];return(e,l)=>(o(),x(w,{"attr-content-arr":t,"event-content":n}))}});var L=e=>{e.__sourceCode="<template>\n  <Mentions v-model:value=\"value\" :options=\"options\" @select=\"onSelect\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { Mentions, MentionsOptions } from '@/lib'\n\nconst value = ref<string>('')\nconst options: MentionsOptions[] = [\n  {\n    label: 'afc163',\n    value: 'afc163'\n  },\n  {\n    label: 'zombieJ',\n    value: 'zombieJ'\n  },\n  {\n    label: 'yesmeck',\n    value: 'yesmeck'\n  }\n]\n\nconst onSelect = (option: MentionsOptions) => {\n  console.log('select', option)\n}\n<\/script>",e.__sourceTitle="基本用法"};const N=t({__name:"DemoOne",setup(e){const n=a(""),t=[{label:"afc163",value:"afc163"},{label:"zombieJ",value:"zombieJ"},{label:"yesmeck",value:"yesmeck"}],l=e=>{console.log("select",e)};return(e,a)=>(o(),x(r(J),{value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e),options:t,onSelect:l},null,8,["value"]))}});L(N);const P=t({__name:"Demo",setup(n){const t=h((()=>[N].map(((e,n)=>S(e,"mentions",n)))));return(n,l)=>(o(),x(e,{"demo-arr":r(t)},null,8,["demo-arr"]))}}),q=t({__name:"Index",setup(e){a(null);const t=["基本用法"],l=h((()=>I("mentions",t)));return(e,t)=>(o(),x(n,{"nav-arr":r(l),title:"Mentions 提及","component-name":"mentions"},{intro:p((()=>[c(A)])),demo:p((()=>[c(P)])),api:p((()=>[c(B)])),_:1},8,["nav-arr"]))}});export{q as default};
