import{D as e,C as t}from"./DemoDisplay-d6102924.js";import"./Upload.vue_vue_type_style_index_0_lang-dcc18adf.js";import{_ as n,P as l,T as a}from"./Footer-492e9d3a.js";import{d as s,v as o,r as i,o as u,c as r,e as c,l as p,m,f as v,g as d,A as f,F as _,h as g,t as b,B as x,T as y,L as M,i as h,j as T,x as w}from"./index-4bdb761c.js";import{_ as S}from"./ApiIntro-e7a82855.js";import{g as j,a as k}from"./helper-f72534c2.js";const I={class:"ui-mentions-wrap"},C=["value"],O={class:"ui-mentions-pop"},D=["title"],z=s({__name:"Mentions",props:{value:{default:""},options:{default:()=>[]}},emits:["select","update:value"],setup(e,{emit:t}){const n=e,{value:l,options:a}=o(n),s=i(null),h=i(null),T=i(0),w=i(!1),S=document.createElement("span");S.classList.add("mentions-pop-left");const j=e=>{const n=e.target;if(t("update:value",n.value),n&&"@"===n.value.substring(n.selectionStart-1,n.selectionStart)){S.innerText=n.value.substring(0,n.selectionStart);let e=S.getBoundingClientRect().width;for(;e+7.1>n.clientWidth-19;)e=e-n.clientWidth+28;T.value=e+11,w.value=!0}else w.value=!1};u((()=>{var e;null==(e=h.value)||e.appendChild(S)}));const k=e=>{const n=e.target,a=n.getAttribute("data-value");if("p"===n.tagName.toLowerCase()&&"list"===a){const e=s.value;let a=0;e&&(a=e.selectionStart);const o=l.value.substring(0,a)+n.innerText+l.value.substring(a);t("update:value",o),t("select",n.innerText),w.value=!1,setTimeout((()=>{e.focus(),e.setSelectionRange(a+n.innerText.length,a+n.innerText.length)}))}},z=()=>{w.value=!1};return(e,t)=>(r(),c("div",I,[p("textarea",{ref_key:"inputRef",ref:s,class:"ui-mentions-input ui-scroll-container",value:m(l),onInput:j,onBlur:z},null,40,C),p("div",{class:"ui-mentions-getWidth",ref_key:"getWidthRef",ref:h},null,512),p("div",{class:"ui-mentions-pop-wrap",onMousedown:k,style:M({left:`${T.value}px`})},[v(y,{name:"mentions"},{default:d((()=>[f(p("div",O,[(r(!0),c(_,null,g(m(a),(e=>(r(),c("p",{key:e,class:"mentions-list-item","data-value":"list",title:e.value},b(e.label),9,D)))),128))],512),[[x,w.value]])])),_:1})],36)]))}}),A=p("p",null,"提及组件。",-1),J=p("ul",null,[p("li",null,"Mentions")],-1),R=p("p",null,"用于在输入中提及某人或某事，常用于发布、聊天或评论功能。",-1),W=s({__name:"Intro",setup:e=>(e,t)=>(r(),h(m(a),null,{default:d((()=>[v(m(n),{level:4},{default:d((()=>[T("简介")])),_:1}),v(m(l),null,{default:d((()=>[A])),_:1}),v(m(n),{level:4},{default:d((()=>[T("组件概述")])),_:1}),v(m(l),null,{default:d((()=>[J])),_:1}),v(m(n),{level:4},{default:d((()=>[T("使用场景")])),_:1}),v(m(l),null,{default:d((()=>[R])),_:1})])),_:1}))}),B=s({__name:"Api",setup(e){const t=[{rowIndex:1,"事件名称":"select","说明":"选择选项时触发","回调参数":"(selectOption:string) => void"}],n=[{componentName:"Mentions",attrContent:[{rowIndex:1,"属性":"value","说明":"value(v-model)","类型":"string","默认值":""},{rowIndex:2,"属性":"options","说明":"提示信息","类型":" MentionsOptions[]","默认值":"[]"}]}];return(e,l)=>(r(),h(S,{"attr-content-arr":n,"event-content":t}))}});var L=e=>{e.__sourceCode="<template>\n  <Mentions v-model:value=\"value\" :options=\"options\" @select=\"onSelect\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { Mentions, MentionsOptions } from '@/lib'\n\nconst value = ref<string>('')\nconst options: MentionsOptions[] = [\n  {\n    label: 'afc163',\n    value: 'afc163'\n  },\n  {\n    label: 'zombieJ',\n    value: 'zombieJ'\n  },\n  {\n    label: 'yesmeck',\n    value: 'yesmeck'\n  }\n]\n\nconst onSelect = (option: MentionsOptions) => {\n  console.log('select', option)\n}\n<\/script>",e.__sourceTitle="基本用法"};const F=s({__name:"DemoOne",setup(e){const t=i(""),n=[{label:"afc163",value:"afc163"},{label:"zombieJ",value:"zombieJ"},{label:"yesmeck",value:"yesmeck"}],l=e=>{console.log("select",e)};return(e,a)=>(r(),h(m(z),{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:n,onSelect:l},null,8,["value"]))}});L(F);const N=s({__name:"Demo",setup(t){const n=w((()=>[F].map(((e,t)=>j(e,"mentions",t)))));return(t,l)=>(r(),h(e,{"demo-arr":m(n)},null,8,["demo-arr"]))}}),U=s({__name:"Index",setup(e){i(null);const n=["基本用法"],l=w((()=>k("mentions",n)));return(e,n)=>(r(),h(t,{"nav-arr":m(l),title:"Mentions 提及","component-name":"mentions"},{intro:d((()=>[v(W)])),demo:d((()=>[v(N)])),api:d((()=>[v(B)])),_:1},8,["nav-arr"]))}});export{U as default};
