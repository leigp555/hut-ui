import{D as e,C as n}from"./DemoDisplay-d6102924.js";import{_ as a,a as t}from"./Upload.vue_vue_type_style_index_0_lang-dcc18adf.js";import{_ as l,P as o,T as r}from"./Footer-492e9d3a.js";import{d as s,c as u,i as d,g as i,f as p,m as c,j as m,l as g,r as f,o as v,e as b,t as x,F as y,h as w,_ as h,x as I}from"./index-4bdb761c.js";import{_ as C,c as _}from"./ApiIntro-e7a82855.js";import{r as T,g as k,a as S}from"./helper-f72534c2.js";import{_ as j}from"./Pagination-b9a4e200.js";import{_ as z}from"./Popconfirm-a6653033.js";import{_ as D}from"./Tag-c82a6ee2.js";import{a as N}from"./ajax-bb2577cc.js";const P=g("p",null,"展示行列数据。",-1),O=g("ul",null,[g("li",null,"Table: 主要组件")],-1),V=g("ul",null,[g("li",null,"当有大量结构化的数据需要展现时；"),g("li",null,"当需要对数据进行排序、搜索、分页、自定义操作等复杂行为时。")],-1),A=s({__name:"Intro",setup:e=>(e,n)=>(u(),d(c(r),null,{default:i((()=>[p(c(l),null,{default:i((()=>[m("简介")])),_:1}),p(c(o),null,{default:i((()=>[P])),_:1}),p(c(l),null,{default:i((()=>[m("组件概览")])),_:1}),p(c(o),null,{default:i((()=>[O])),_:1}),p(c(l),null,{default:i((()=>[m("使用场景")])),_:1}),p(c(o),null,{default:i((()=>[V])),_:1})])),_:1}))}),H=s({__name:"Api",setup(e){const n=[],a=[{componentName:"Text",attrContent:[{rowIndex:1,"属性":"headSource","说明":"头部数据","类型":"TableDataType[]","默认值":"[]"},{rowIndex:2,"属性":"bodySource","说明":"代码标记","类型":"表身数据数组","默认值":"[]"},{rowIndex:3,"属性":"loading","说明":"是否为加载中状态","类型":"boolean","默认值":"false"},{rowIndex:4,"属性":"styleMode","说明":"表格样式","类型":"'auto' | 'fixed'","默认值":"auto"},{rowIndex:5,"属性":"bordered","说明":"是否有边框","类型":"boolean","默认值":"true"},{rowIndex:6,"属性":"customClass","说明":"自定义class","类型":"string","默认值":"custom-class-table"}]}];return(e,t)=>(u(),d(C,{"attr-content-arr":a,"event-content":n}))}});var B=e=>{e.__sourceCode='<template>\n  <Table\n    :headSource="columns"\n    :bodySource="data"\n    :loading="loading"\n    style-mode="auto"\n    bordered\n  >\n    <template #head>Header</template>\n    <template #footer>Footer</template>\n    <template #tableHead="item">\n      <span v-if="item.keyValue === \'name\'" style="color: red">\n        <SvgIcon name="weixin" width="1em " height="1em" style="margin-right: 4px" />\n        {{ item.dataValue }}\n      </span>\n      <span v-else>{{ item.dataValue }}</span>\n    </template>\n    <template #tableBody="item">\n      <div v-if="item.keyValue === \'tags\'" class="tags">\n        <Tag :color="randomColor()" v-for="i in item.dataValue" :key="i">\n          {{ i.toUpperCase() }}\n        </Tag>\n      </div>\n      <div v-else-if="item.keyValue === \'actions\'" class="actions">\n        <div>\n          <Popconfirm\n            placement="topCenter"\n            okText="Yes"\n            cancelText="No"\n            @confirm="confirm(item.data)"\n          >\n            <template #title>\n              <p>{{ text }}</p>\n            </template>\n            <Button type="link" style="padding: 4px 8px">delete</Button>\n          </Popconfirm>\n        </div>\n      </div>\n      <span v-else style="color: #1890ff">{{ item.dataValue }}</span>\n    </template>\n    <template #pagination>\n      <div style="display: flex; justify-content: center; margin-top: 50px">\n        <Pagination\n          v-model:current="current"\n          :total="dataNum"\n          v-model:pageSize="pageSize"\n          @pageSizeChange="pageSize = $event"\n          :disabled="loading"\n          :pageSizeOptions="pageSizeOptions"\n          showQuickJumper\n          showSizeChanger\n          showTotal\n          @change="pageChange"\n        >\n          <template #buildOptionText="props">\n            <span>{{ props.value }}条/页</span>\n          </template>\n        </Pagination>\n      </div>\n    </template>\n  </Table>\n</template>\n\n<script setup lang="ts">\nimport { onMounted, ref } from \'vue\'\nimport {\n  Table,\n  Pagination,\n  Popconfirm,\n  Tag,\n  SvgIcon,\n  Button,\n  TableDataType\n} from \'@/lib\'\n\nimport { ajax } from \'@/eg/ajax\'\nimport { randomColor } from \'@/eg/helper\'\n\nconst current = ref<number>(1)\nconst pageSize = ref<number>(5)\nconst pageSizeOptions = ref<string[]>([\'5\', \'10\', \'20\', \'30\', \'40\'])\nconst dataNum = ref<number>(0)\nconst loading = ref<boolean>(false)\n\nconst sharedOnCell = (rowIndex: number): { colspan: number } => {\n  if (rowIndex === 5) {\n    return { colspan: 0 }\n  }\n  return { colspan: 1 }\n}\nconst columns = ref<TableDataType[]>([\n  {\n    rowIndex: 0,\n    label: \'Name\',\n    key: \'name\',\n    customCell: (rowIndex) => ({\n      colspan: rowIndex === 5 ? 6 : 1\n    })\n  },\n  {\n    rowIndex: 0,\n    label: \'Age\',\n    key: \'age\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Home phone\',\n    colspan: 2,\n    key: \'tel\',\n    // eslint-disable-next-line consistent-return\n    customCell: (rowIndex) => {\n      if (rowIndex === 2) {\n        return { rowspan: 2 }\n      }\n      if (rowIndex === 3) {\n        return { rowspan: 0 }\n      }\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  },\n  {\n    rowIndex: 0,\n    label: \'Phone\',\n    colspan: 0,\n    key: \'phone\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Address\',\n    key: \'address\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'tags\',\n    key: \'tags\',\n    customCell: sharedOnCell\n  },\n  {\n    rowIndex: 0,\n    label: \'Actions\',\n    key: \'actions\',\n    customCell: () => ({ colspan: 1 })\n  }\n])\n\nconst data = ref<TableDataType[]>([])\n\nconst fetch = {\n  get(url: string) {\n    if (url === \'/table\') {\n      loading.value = true\n      ;(\n        ajax(url, 0, current.value, pageSize.value) as Promise<{\n          data: TableDataType[]\n          totalDateNum: number\n        }>\n      )\n        .then((res) => {\n          data.value = [...res.data]\n          dataNum.value = res.totalDateNum\n          loading.value = false\n        })\n        .catch((err) => {\n          console.log(err)\n          loading.value = false\n        })\n    }\n  },\n  delete(url: string, payload: string) {\n    if (url === \'/table\') {\n      loading.value = true\n      ;(\n        ajax(url, 0, current.value, pageSize.value, payload, \'delete\') as Promise<{\n          data: TableDataType[]\n          totalDateNum: number\n        }>\n      )\n        .then((res) => {\n          data.value = [...res.data]\n          dataNum.value = res.totalDateNum\n          loading.value = false\n        })\n        .catch((err) => {\n          console.log(err)\n          loading.value = false\n        })\n    }\n  }\n}\nonMounted(() => {\n  fetch.get(\'/table\')\n})\nconst pageChange = (newPage: number) => {\n  current.value = newPage\n  fetch.get(\'/table\')\n}\n\nconst text = \'Sure to delete?\'\n\nconst confirm = (item: TableDataType) => {\n  // 删除操作前应把原先的表格合并操作先复原，不然后续的表格格式会错乱\n  if (item.rowIndex === 2) {\n    columns.value[2].customCell = (rowIndex) => {\n      if (rowIndex === 3) {\n        return { colspan: 1, rowspan: 1 }\n      }\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  } else if (item.rowIndex === 3) {\n    columns.value[2].customCell = (rowIndex) => {\n      if (rowIndex === 2) {\n        return { rowspan: 1 }\n      }\n\n      if (rowIndex === 5) {\n        return { colspan: 0 }\n      }\n      return { colspan: 1 }\n    }\n  }\n  // 发送删除请求\n  fetch.delete(\'/table\', JSON.stringify(item))\n}\n<\/script>\n\n<style scoped lang="scss">\n.actions,\n.tags {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n</style>',e.__sourceTitle="基本用法"};const U={key:0,style:{color:"red"}},F={key:1},J={key:0,class:"tags"},M={key:1,class:"actions"},Q={key:2,style:{color:"#1890ff"}},Y={style:{display:"flex","justify-content":"center","margin-top":"50px"}},$=s({__name:"DemoOne",setup(e){const n=f(1),l=f(5),o=f(["5","10","20","30","40"]),r=f(0),s=f(!1),h=e=>5===e?{colspan:0}:{colspan:1},I=f([{rowIndex:0,label:"Name",key:"name",customCell:e=>({colspan:5===e?6:1})},{rowIndex:0,label:"Age",key:"age",customCell:h},{rowIndex:0,label:"Home phone",colspan:2,key:"tel",customCell:e=>2===e?{rowspan:2}:3===e?{rowspan:0}:5===e?{colspan:0}:{colspan:1}},{rowIndex:0,label:"Phone",colspan:0,key:"phone",customCell:h},{rowIndex:0,label:"Address",key:"address",customCell:h},{rowIndex:0,label:"tags",key:"tags",customCell:h},{rowIndex:0,label:"Actions",key:"actions",customCell:()=>({colspan:1})}]),C=f([]),k={get(e){"/table"===e&&(s.value=!0,N(e,0,n.value,l.value).then((e=>{C.value=[...e.data],r.value=e.totalDateNum,s.value=!1})).catch((e=>{console.log(e),s.value=!1})))},delete(e,a){"/table"===e&&(s.value=!0,N(e,0,n.value,l.value,a,"delete").then((e=>{C.value=[...e.data],r.value=e.totalDateNum,s.value=!1})).catch((e=>{console.log(e),s.value=!1})))}};v((()=>{k.get("/table")}));const S=e=>{n.value=e,k.get("/table")};return(e,f)=>(u(),d(c(_),{headSource:I.value,bodySource:C.value,loading:s.value,"style-mode":"auto",bordered:""},{head:i((()=>[m("Header")])),footer:i((()=>[m("Footer")])),tableHead:i((e=>["name"===e.keyValue?(u(),b("span",U,[p(c(a),{name:"weixin",width:"1em ",height:"1em",style:{"margin-right":"4px"}}),m(" "+x(e.dataValue),1)])):(u(),b("span",F,x(e.dataValue),1))])),tableBody:i((e=>["tags"===e.keyValue?(u(),b("div",J,[(u(!0),b(y,null,w(e.dataValue,(e=>(u(),d(c(D),{color:c(T)(),key:e},{default:i((()=>[m(x(e.toUpperCase()),1)])),_:2},1032,["color"])))),128))])):"actions"===e.keyValue?(u(),b("div",M,[g("div",null,[p(c(z),{placement:"topCenter",okText:"Yes",cancelText:"No",onConfirm:n=>(e=>{2===e.rowIndex?I.value[2].customCell=e=>3===e?{colspan:1,rowspan:1}:5===e?{colspan:0}:{colspan:1}:3===e.rowIndex&&(I.value[2].customCell=e=>2===e?{rowspan:1}:5===e?{colspan:0}:{colspan:1}),k.delete("/table",JSON.stringify(e))})(e.data)},{title:i((()=>[g("p",null,x("Sure to delete?"))])),default:i((()=>[p(c(t),{type:"link",style:{padding:"4px 8px"}},{default:i((()=>[m("delete")])),_:1})])),_:2},1032,["onConfirm"])])])):(u(),b("span",Q,x(e.dataValue),1))])),pagination:i((()=>[g("div",Y,[p(c(j),{current:n.value,"onUpdate:current":f[0]||(f[0]=e=>n.value=e),total:r.value,pageSize:l.value,"onUpdate:pageSize":f[1]||(f[1]=e=>l.value=e),onPageSizeChange:f[2]||(f[2]=e=>l.value=e),disabled:s.value,pageSizeOptions:o.value,showQuickJumper:"",showSizeChanger:"",showTotal:"",onChange:S},{buildOptionText:i((e=>[g("span",null,x(e.value)+"条/页",1)])),_:1},8,["current","total","pageSize","disabled","pageSizeOptions"])])])),_:1},8,["headSource","bodySource","loading"]))}});B($);var q=h($,[["__scopeId","data-v-74bb5f27"]]);const E=s({__name:"Demo",setup(n){const a=I((()=>[q].map(((e,n)=>k(e,"table",n)))));return(n,t)=>(u(),d(e,{"demo-arr":c(a)},null,8,["demo-arr"]))}}),G=s({__name:"Index",setup(e){f(null);const a=["基本用法"],t=I((()=>S("table",a)));return(e,a)=>(u(),d(n,{"nav-arr":c(t),title:"Table 表格","component-name":"table"},{intro:i((()=>[p(A)])),demo:i((()=>[p(E)])),api:i((()=>[p(H)])),_:1},8,["nav-arr"]))}});export{G as default};
